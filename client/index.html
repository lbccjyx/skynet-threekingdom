<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三国模拟经营</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="login-screen">
        <div class="login-box">
            <h1>三国模拟经营</h1>
            <div class="form-group">
                <label for="username">账号</label>
                <input type="text" id="username" placeholder="请输入账号" value="test1206">
            </div>
            <div class="form-group">
                <label for="password">密码</label>
                <input type="password" id="password" placeholder="请输入密码" value="123">
            </div>
            <button id="btn-login">登录 / 注册</button>
            <p id="login-msg"></p>
        </div>
    </div>

    <!-- 3D Canvas 放在最底层作为背景 -->
    <div id="three-container"></div>

    <div id="game-screen" class="hidden">
        <!-- 顶部资源栏 -->
        <div class="top-bar">
            <div class="resource">金币: <span id="res-gold">0</span></div>
            <div class="resource">木材: <span id="res-wood">0</span></div>
            <div class="resource">石料: <span id="res-stone">0</span></div>
            <div class="resource">粮食: <span id="res-food">0</span></div>
            <div class="resource">人口: <span id="res-pop">0</span></div>
        </div>
        
        <!-- UI 覆盖层 -->
        <div class="ui-layer">
            <div class="city-view" id="city-view">
                <h2 style="display:none">城池: <span id="city-name"></span> (Lv.<span id="city-level"></span>)</h2>
                <div class="view-controls">
                    <button id="btn-to-map">出城 (野外)</button>
                </div>
                <!-- 这里的 buildings-grid 仅用于调试或旧版显示，3D 模式下可能不需要，或者设为穿透 -->
                <div class="buildings-grid" id="buildings-container"></div>
            </div>
            
            <div class="map-view hidden" id="map-view">
                <h2>野外地图</h2>
                <div class="view-controls">
                    <button id="btn-back-to-city">回城</button>
                </div>
                <div class="map-grid" id="map-container"></div>
                <div id="btn-to-city" class="mini-city-icon" title="回城"></div>
            </div>
        </div>
        
        <!-- 日志面板改为悬浮小窗口 -->
        <div class="log-panel">
            <h3>日志 <button id="btn-toggle-log" style="float:right; width:auto; padding:2px 5px; font-size:10px;">-</button></h3>
            <div id="log-content"></div>
        </div>
    </div>

    <script src="js/three.min.js"></script>
    <script src="js/sproto-parser.js"></script>
    <script src="js/sproto.js"></script>
    <script src="js/StaticData.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
